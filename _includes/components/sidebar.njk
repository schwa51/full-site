<nav class="sidebar">
  <button class="sidebar-toggle"
          onclick="document.body.classList.toggle('sidebar-open')">
    ☰ Menu
  </button>

  {% set navTree = collections.all | eleventyNavigation %}

  <ul class="sidebar-nav">
    {# Top-level entries #}
    {% for item in navTree %}
      <li>
        <a href="{{ item.url }}"
           class="{% if page.url === item.url %}active{% endif %}">
          {{ item.title }}
        </a>

        {# If this is the branch we’re currently in, show its children #}
        {% if page.url.startsWith(item.url) and item.children %}
          <ul>
            {% for child in item.children %}
              <li>
                <a href="{{ child.url }}"
                   class="{% if page.url === child.url %}active{% endif %}">
                  {{ child.title }}
                </a>
              </li>
            {% endfor %}
          </ul>
        {% endif %}
      </li>
    {% endfor %}
  </ul>
</nav>
