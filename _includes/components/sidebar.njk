{# TEMPORARY DEBUGGING OUTPUT #}
<p style="font-size: 0.8em; color: #999; margin-left: 1rem;">
  Comparing campaign.key: <strong>{{ campaign.key }}</strong><br>
  to currentCampaign: <strong>{{ currentCampaign }}</strong>
</p>
<nav class="sidebar">
  {% set navTree = collections.all | eleventyNavigation %}
  <ul>
    {% for campaign in navTree %}
      <li>
        <a href="{{ campaign.url }}"
           {% if page.url == campaign.url %}class="active"{% endif %}>
          {{ campaign.title }}
        </a>

        {# Show children only if this is the current campaign #}

        {% if campaign.children and campaign.key == currentCampaign %}
          <ul>
            {% for section in campaign.children %}
              <li>
                <a href="{{ section.url }}"
                   {% if page.url == section.url %}class="active"{% endif %}>
                  {{ section.title }}
                </a>

                  {% if section.children %}
                    <ul>
                      {% for child in section.children %}
                        <li>
                          <a href="{{ child.url }}"
                             {% if page.url == child.url %}class="active"{% endif %}>
                            {{ child.title }}
                          </a>
                        </li>
                      {% endfor %}
                    </ul>
                  {% endif %}

              </li>
            {% endfor %}
          </ul>
        {% endif %}
      </li>
    {% endfor %}
  </ul>
</nav>
