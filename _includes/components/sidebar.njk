<nav class="sidebar">
  <ul>
    {% for campaign in collections.all | eleventyNavigation %}
      {% if campaign.parent == "Main" %}
        <li class="sidebar-section">
          <strong>{{ campaign.title }}</strong>

          {# Show children only for current campaign #}
          {% if campaign.key == page.campaign %}
            <ul>
              {% for section in campaign.children %}
                <li>
                  <a 
                    href="{{ section.url }}"
                    class="{% if page.url == section.url %}active{% endif %}"
                  >
                    {{ section.title }}
                  </a>

                  {# Check for grandchildren (leaf pages like individual sessions) #}
                  {% if section.children %}
                    <ul>
                      {% for leaf in section.children %}
                        <li>
                          <a 
                            href="{{ leaf.url }}"
                            class="{% if page.url == leaf.url %}active{% endif %}"
                          >
                            {{ leaf.title }}
                          </a>
                        </li>
                      {% endfor %}
                    </ul>
                  {% endif %}
                </li>
              {% endfor %}
            </ul>
          {% endif %}
        </li>
      {% endif %}
    {% endfor %}
  </ul>
</nav>
