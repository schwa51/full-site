<nav class="sidebar">
  <button class="sidebar-toggle" onclick="document.body.classList.toggle('sidebar-open')">
    â˜° Menu
  </button>
  <ul class="sidebar-nav">
    {% set currentCampaignKey = page.campaign %}
    {% set campaignNav = collections.all | eleventyNavigation %}

    {% for section in campaignNav %}
      {% if section.parent == currentCampaignKey %}
        <li>
          <a href="{{ section.url }}" class="{% if page.url == section.url %}active{% endif %}">
            {{ section.title }}
          </a>

          {% set subsectionChildren = campaignNav | filter(attr => attr.parent == section.key) %}
          {% if subsectionChildren.length %}
            <ul>
              {% for leaf in subsectionChildren %}
                <li>
                  <a href="{{ leaf.url }}" class="{% if page.url == leaf.url %}active{% endif %}">
                    {{ leaf.title }}
                  </a>
                </li>
              {% endfor %}
            </ul>
          {% endif %}
        </li>
      {% endif %}
    {% endfor %}
  </ul>
</nav>
