---
title: Sam's RPG Archive
layout: layout.njk
theme: main
publish: true
eleventyNavigation:
  key: Home
  order: 0
---
<p>Explore the stories, maps, and characters from our campaigns:</p>
{% set actives  = site.activeCampaigns or [] %}
{% set featured = site.featuredCampaigns or [] %}
{% set past = site.pastCampaigns or [] %}
{% set names    = campaigns or site.campaigns or {} %}

<h2>Active Campaigns</h2>
{% if actives | length %}
  <ul class="cards">
    {% for slug in actives %}
      {% set homePage = (collections.public_content
        | byCampaign(slug)
        | where("data.isHome", true)
      )[0] %}
      {% set url = (homePage and homePage.url) or ("/vault/campaigns/" + (slug | slug) + "/") %}
      <li><a class="btn" href="{{ url }}">{{ names[slug] or (slug | replace("-", " ") | titleize) }}</a></li>
    {% endfor %}
  </ul>
{% else %}
  <p class="muted">No active campaign set.</p>
{% endif %}

<section>
  <h2>Featured Games</h2>
  {% if featured | length %}
    <ul class="cards">
      {% for c in featured %}
        {% set homePage = (collections.public_content
          | byCampaign(c)
          | where("data.isHome", true)
        )[0] %}
        {% set url = (homePage and homePage.url) or ("/vault/campaigns/" + (c | slug) + "/") %}
        <li><a href="{{ url }}">{{ names[c] or (c | replace("-", " ") | titleize) }}</a></li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="muted">No featured games configured.</p>
  {% endif %}
</section>

<section>
  <h2>Past Games</h2>
  {% if past | length %}
    <ul class="cards">
      {% for c in past %}
        {% set homePage = (collections.public_content
          | byCampaign(c)
          | where("data.isHome", true)
        )[0] %}
        {% set url = (homePage and homePage.url) or ("/vault/campaigns/" + (c | slug) + "/") %}
        <li><a href="{{ url }}">{{ names[c] or (c | replace("-", " ") | titleize) }}</a></li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="muted">No past games configured.</p>
  {% endif %}
</section>