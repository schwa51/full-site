---
title: Sam's RPG Archive
layout: layout.njk
theme: main
publish: true
eleventyNavigation:
  key: Home
  order: 0
---
<p>Explore the stories, maps, and characters from our campaigns:</p>

{% set active = site.activeCampaign %}
{% set featuredCampaigns = site.featuredCampaigns or [] %}


<section>
  <h2>Active Campaign</h2>
  {% if active %}
    <p><a class="btn" href="/vault/campaigns/{{ active }}/">Go to {{ active | replace("-", " ") | capitalize }}</a></p>
    <div class="grid">
      {% for s in ["locations","sessions","items","npcs","lore","maps","general"] %}
        {% set count = (collections.campaign_content or [])
          | byCampaign(active)
          | where("data.section", s)
          | length %}
        <div class="pill"><a href="/vault/campaigns/{{ active }}/{{ s }}/">{{ s | capitalize }}</a> ({{ count }})</div>
      {% endfor %}
    </div>
  {% else %}
    <p class="muted">No active campaign set.</p>
  {% endif %}
</section>

{% set names = campaigns or site.campaigns or {} %}

<section>
  <h2>Featured Games</h2>
  <ul class="cards">
    {% for c in featuredCampaigns %}
      <li>
        <a href="/vault/campaigns/{{ c }}/">
          {{ names[c] or (c | replace("-", " ") | titleize) }}
        </a>
      </li>
    {% endfor %}
  </ul>
</section>


{% from "components/rails.njk" import tagRail, pinRail %}

{# choose a stable base once #}
{% set railBase = collections.public_content or [] %}

{# quick debug — these should be > 0 if your tag exists in railBase #}
<p>dbg railBase len: {{ railBase | length }}</p>
<p>dbg railBase tag len: {{ railBase | byTag("halloween_game") | sortFeatured | length }}</p>

{{ tagRail("Halloween", "halloween_game", null, 12, railBase) }}

{# Optional: a “Pinned” rail #}
{# {{ pinRail("Pinned", null, 6, railBase) }} #}

