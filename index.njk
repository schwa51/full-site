---
title: Sam's RPG Archive
layout: layout.njk
theme: main
publish: true
eleventyNavigation:
  key: Home
  order: 0
---
<p>Explore the stories, maps, and characters from our campaigns:</p>

{% set active = site.activeCampaign %}
{% set featuredCampaigns = site.featuredCampaigns or [] %}

<section>
  <h2>Active Campaign</h2>
  {% if active %}
    <p><a class="btn" href="/vault/campaigns/{{ active }}/">Go to {{ active | replace("-", " ") | capitalize }}</a></p>
    <div class="grid">
      {% for s in ["locations","sessions","items","npcs","lore","maps","general"] %}
        {% set count = (collections.campaign_content or [])
          | byCampaign(active)
          | where("data.section", s)
          | length %}
        <div class="pill"><a href="/vault/campaigns/{{ active }}/{{ s }}/">{{ s | capitalize }}</a> ({{ count }})</div>
      {% endfor %}
    </div>
  {% else %}
    <p class="muted">No active campaign set.</p>
  {% endif %}
</section>

<section>
  <h2>Featured Games</h2>
  <ul class="cards">
    {% for c in featuredCampaigns %}
      <li><a href="/vault/campaigns/{{ c }}/">{{ c | replace("-", " ") | capitalize }}</a></li>
    {% endfor %}
  </ul>
</section>

<section>
  <h2>Highlights</h2>
  {% set pins = [] %}
  {% for key in (site.homepagePins or []) %}
    {% set pins = pins | concat(collections[key] or []) %}
  {% endfor %}
  {% set pins = pins | uniqueBy("inputPath") | sortBy("data.indexOrder") %}
  <ul class="list">
    {% for p in pins %}
      <li><a href="{{ p.url }}">{{ p.data.title }}</a></li>
    {% endfor %}
  </ul>
</section>
{% set pins = (site.homepagePins or []) 
  | collect(collections) 
  | uniqueBy("inputPath") 
  | sortBy("data.indexOrder") %}

<ul class="list">
  {% for p in pins %}
    <li><a href="{{ p.url }}">{{ p.data.title }}</a></li>
  {% endfor %}
</ul>
