---
layout: layout.njk
theme: mothership
publish: true
type: general
campaign: mothership
---

{% set bounties = collections.all | byType('bounty') %}

<div class="net-wrap">

  <header class="net-header">
    <h1>BOUNTY NET // LIVE FEED</h1>
    <p class="net-sub">Authenticated uplink established · feed integrity nominal</p>

    <form id="filters" class="net-filters" autocomplete="off">
      <label>
        BL
        <select id="filter-bl">
          <option value="">All</option>
          {# We'll also fill this dynamically via JS from the cards #}
        </select>
      </label>

      <label>
        Wanted
        <select id="filter-wanted">
          <option value="">All</option>
          {# Also dynamically filled #}
        </select>
      </label>

      <label class="search">
        <input id="filter-search" type="search" placeholder="Target / Advert…" inputmode="search">
      </label>

      <button type="button" id="filters-clear" class="ghost">Clear</button>
    </form>
  </header>

  <section id="bounty-list" class="net-grid">
    {% for bounty in bounties | reverse %}
      {% set fm = bounty.data %}
      {% set target = fm.target or "—" %}
      {% set bl = fm.BL or "" %}
      {% set reward = fm.reward or "—" %}
      {% set wanted = fm.wanted %}
      {% set wantedList = wanted | join(", ") if wanted else "" %}
      {% set advert = fm.Advert or "" %}
      {% set thumb = fm.image or "" %}

      <article
        class="net-card"
        data-bl="{{ (bl ~ '') | trim }}"
        data-wanted="{{ wantedList | lower }}"
        data-text="{{ (target ~ ' ' ~ advert) | lower | replace('\n',' ') }}"
      >
        <a class="net-card__link" href="{{ bounty.url }}">
          <div class="net-card__chrome">
            <div class="chrome__glitch" aria-hidden="true"></div>
            <div class="chrome__scanline" aria-hidden="true"></div>
          </div>

          <header class="net-card__head">
            <div class="net-card__eyebrow">Bounty Level: <strong>{{ bl or "?" }}</strong></div>
            <h2 class="net-card__title">{{ target }}</h2>
          </header>

          {% if thumb %}
            <div class="net-card__thumb" style="background-image:url('{{ thumb }}')"></div>
          {% endif %}

          <dl class="net-card__meta">
            <div><dt>Reward</dt><dd>{{ reward }}</dd></div>
            <div><dt>Wanted</dt><dd>{{ wantedList or "—" }}</dd></div>
          </dl>

          {% if advert %}
            <p class="net-card__advert">{{ advert | truncate(180, true, "…") }}</p>
          {% endif %}

          <div hidden>
          <footer class="net-card__foot">
            <span>OPEN RECORD</span>
            <span class="arrow">↗</span>
          </footer>
          </div>

        </a>
      </article>
    {% endfor %}
  </section>

  <template id="empty-state">
    <p class="net-empty">No results. Adjust filters or clear all.</p>
  </template>
</div>

<style>
/* ==== AR / Holo Poster Theme (uses your existing markup/JS) ==== */
:root{
  --holo-fg: #e6fffb;
  --holo-dim: #99ffee;
  --holo-cyan: #00e7ff;
  --holo-pink: #ff47c9;
  --holo-amber: #ffc879;
  --glass-bg: rgba(10,14,18,.55);
  --glass-edge: rgba(0,231,255,.35);
  --chip-bg: rgba(0,231,255,.10);
  --chip-br: rgba(0,231,255,.45);
}
body{ background: #05080a; color:var(--holo-fg); font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Courier New", monospace; }

.net-wrap{
  max-width:1100px; margin:0 auto; padding:18px;
  background: radial-gradient(900px 500px at 20% -10%, rgba(0,231,255,.08), transparent) #05080a;
  border:1px solid rgba(255,255,255,.06);
  border-radius:12px;
  box-shadow: 0 0 40px rgba(0,231,255,.12);
  position:relative; overflow:hidden;
}
.net-wrap:after{
  /* faint scan-sweep */
  content:""; position:absolute; inset:0; pointer-events:none;
  background: linear-gradient( to bottom, transparent 0%, rgba(255,255,255,.04) 50%, transparent 100%);
  mix-blend-mode:screen; animation: sweep 6s linear infinite;
}
@keyframes sweep{ 0%{transform:translateY(-100%)} 100%{transform:translateY(100%)} }

.net-header{ text-align:center; padding-bottom:8px; margin-bottom:14px; border-bottom:1px solid rgba(255,255,255,.08); }
.net-header h1{ margin:0; letter-spacing:.08em; text-transform:uppercase; color:var(--holo-fg); text-shadow:0 0 10px rgba(0,231,255,.25); }
.net-sub{ margin:4px 0 0; color:var(--holo-dim); }

/* Filters: sleek glass bar */
.net-filters{
  display:grid; grid-template-columns: 120px 180px 1fr 100px; gap:10px; align-items:end;
  background: rgba(12,16,20,.6);
  border:1px solid rgba(255,255,255,.10);
  border-radius:8px; padding:10px; margin:14px 0 18px;
  box-shadow: inset 0 0 0 1px rgba(0,231,255,.06), 0 0 16px rgba(0,231,255,.08);
}
.net-filters label{ display:grid; gap:6px; font-size:12px; color:var(--holo-dim); letter-spacing:.06em; }
.net-filters select, .net-filters input[type="search"]{
  background: rgba(0,0,0,.55); color:var(--holo-fg);
  border:1px solid rgba(255,255,255,.15); border-radius:6px; padding:8px 10px; outline:none;
  box-shadow: inset 0 0 0 1px rgba(0,231,255,.06);
}
.net-filters .search{ grid-column:3/4; }
.net-filters .ghost{
  justify-self:start; align-self:center; padding:8px 12px; border-radius:6px; cursor:pointer;
  background: rgba(0,0,0,.55); color:var(--holo-fg); border:1px dashed rgba(255,255,255,.18);
}

/* GRID: make each card a full-width holo panel */
.net-grid{ display:grid; grid-template-columns:1fr; gap:12px; }

/* HOLO CARD */
.net-card{
  position:relative; overflow:hidden;
  background: var(--bl-color);
  backdrop-filter: blur(6px) saturate(120%);
  -webkit-backdrop-filter: blur(6px) saturate(120%);
  border:1px solid var(--glass-edge);
  border-radius:12px;
  box-shadow:
    0 0 0 1px rgba(255,255,255,.04) inset,
    0 0 22px rgba(0,231,255,.18),
    0 0 40px rgba(255,71,201,.06);
  transition: transform .12s ease, box-shadow .2s ease, border-color .2s ease;
}
.net-card:hover{
  transform: translateY(-2px);
  border-color: rgba(0,231,255,.55);
  box-shadow: 0 0 0 1px rgba(255,255,255,.06) inset, 0 0 30px rgba(0,231,255,.28);
}
.net-card__link{
  display:grid; grid-template-columns: 140px 1fr; grid-auto-rows: min-content;
  column-gap:16px; align-items:start; color:inherit; text-decoration:none;
  padding:12px;
}

/* LEFT PORTRAIT */
.net-card__thumb{
  grid-row: 1 / span 4; grid-column: 1 / 2;
  width:140px; min-height:140px; height:100%;
  background-size:cover; background-position:center;
  border-radius:10px;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.1), 0 0 16px rgba(0,231,255,.18);
  filter: saturate(1.05) contrast(1.05) brightness(.92);
}

/* RIGHT CONTENT */
.net-card__head{ grid-column:2; padding:0 0 6px; border-bottom:1px solid rgba(255,255,255,.08); }
.net-card__eyebrow{
  color:var(--holo-dim); font-size:12px; letter-spacing:.08em; text-transform:uppercase;
}
.net-card__eyebrow strong{
  margin-left:6px; font-weight:700;
  padding:2px 8px; border-radius:999px;
  background: var(--chip-bg); border:1px solid var(--chip-br); color:var(--holo-fg);
}
.net-card__title{
  margin:4px 0 0; font-size:1.25rem; line-height:1.15;
  color: var(--holo-fg);  /* or any color you like */
  letter-spacing:.02em; text-shadow:0 0 10px rgba(0,231,255,.25);
}

/* Meta as chips (Reward/Wanted) */
.net-card__meta{
  grid-column:2; display:flex; flex-wrap:wrap; gap:8px; padding:10px 0 0;
}
.net-card__meta > div{
  display:inline-flex; align-items:center; gap:6px;
  padding:6px 10px; border-radius:999px;
  background: var(--chip-bg);
  border:1px solid var(--chip-br);
  font-size:12px; line-height:1;
}
.net-card__meta dt{ text-transform:uppercase; color:var(--holo-dim); letter-spacing:.08em; }
.net-card__meta dd{ margin:0; color:var(--holo-fg); }

/* Advert as “transmission” */
.net-card__advert{
  grid-column:2; margin:10px 0 0; padding:10px 12px; border-radius:10px;
  background: rgba(255,255,255,.03); border:1px solid rgba(255,255,255,.07);
  color:var(--holo-fg); font-style:italic;
  box-shadow: inset 0 0 0 1px rgba(0,231,255,.05);
}
.net-card__advert:before, .net-card__advert:after{ content:'“'; color:var(--holo-amber); }
.net-card__advert:after{ content:'”'; }

/* Footer link */
.net-card__foot{
  grid-column:2; display:flex; justify-content:space-between; align-items:center;
  border-top:1px solid rgba(255,255,255,.08); margin-top:10px; padding-top:10px;
  color:var(--holo-cyan); letter-spacing:.06em;
}
.net-card__foot .arrow{ transform: translateY(1px); }

/* BL tinting (optional subtle) */
.net-card[data-bl="1"]{ box-shadow: 0 0 24px rgba(0,255,170,.16); }
.net-card[data-bl="2"]{ box-shadow: 0 0 24px rgba(0,231,255,.16); }
.net-card[data-bl="3"]{ box-shadow: 0 0 24px rgba(255,200,121,.16); }
.net-card[data-bl="4"]{ box-shadow: 0 0 24px rgba(255,120,120,.16); }
.net-card[data-bl="5"]{ box-shadow: 0 0 24px rgba(255,71,201,.18); }

/* Responsive: stack portrait on narrow screens */
@media (max-width: 640px){
  .net-card__link{ grid-template-columns: 1fr; }
  .net-card__thumb{ grid-row:auto; grid-column:1; width:100%; min-height:180px; border-radius:8px; }
  .net-card__head, .net-card__meta, .net-card__advert, .net-card__foot{ grid-column:1; }
}

/* === BL-driven theming: colors cascade from data-bl on each card === */
/* Base hooks used by the card */
.net-card {
  --bl-title: var(--holo-fg);
  --bl-chip-bg: var(--chip-bg);
  --bl-chip-text: var(--bl-chip-text);
}
/* Apply the variables to the chip + title */
.net-card__eyebrow{ color: var(--bl-color); }
.net-card__eyebrow strong {
  background: var(--bl-chip-bg);
  border-color: var(--bl-chip-br);
  color: var(--bl-chip-text);
}

/* -------- Level map: 1 (yellow) ➜ 9 (blackish) -------- */
.net-card[data-bl="1"] { --bl-color: #f8d64e; --bl-chip-text: #f8d64e; --bl-chip-bg: #FDF4D7; }
.net-card[data-bl="2"] { --bl-color: #e5a245; --bl-chip-text: #e5a245; --bl-chip-bg: #F9E8D0; }
.net-card[data-bl="3"] { --bl-color: #d3703a; --bl-chip-text: #d3703a; --bl-chip-bg: #F3DCC9; }
.net-card[data-bl="4"] { --bl-color: #c73632; --bl-chip-text: #c73632; --bl-chip-bg: #EFD1C3; }
.net-card[data-bl="5"] { --bl-color: #9d2b3a; --bl-chip-text: #9d2b3a; --bl-chip-bg: #E1C8C2; }
.net-card[data-bl="6"] { --bl-color: #781f40; --bl-chip-text: #781f40; --bl-chip-bg: #D7C2C3; }
.net-card[data-bl="7"] { --bl-color: #580e3f; --bl-chip-text: #580e3f; --bl-chip-bg: #CCBBC4; }
.net-card[data-bl="8"] { --bl-color: #300533; --bl-chip-text: #300533; --bl-chip-bg: #BDB4BE; }
.net-card[data-bl="9"] { --bl-color: #030d1a; --bl-chip-text: #030d1a; --bl-chip-bg: #B2B2B7; }

/* Optional: give the whole card a faint aura by BL too */
.net-card[data-bl="1"] { box-shadow: 0 0 24px rgba(255,224,102,.16), var(--_shadow, 0 0 0 transparent); }
.net-card[data-bl="2"] { box-shadow: 0 0 24px rgba(255,195,77,.16), var(--_shadow, 0 0 0 transparent); }
.net-card[data-bl="3"] { box-shadow: 0 0 24px rgba(255,165,58,.16), var(--_shadow, 0 0 0 transparent); }
.net-card[data-bl="4"] { box-shadow: 0 0 24px rgba(255,135,48,.16), var(--_shadow, 0 0 0 transparent); }
.net-card[data-bl="5"] { box-shadow: 0 0 24px rgba(255,106,42,.16), var(--_shadow, 0 0 0 transparent); }
.net-card[data-bl="6"] { box-shadow: 0 0 24px rgba(255,74,42,.16),  var(--_shadow, 0 0 0 transparent); }
.net-card[data-bl="7"] { box-shadow: 0 0 24px rgba(226,42,42,.18),  var(--_shadow, 0 0 0 transparent); }
.net-card[data-bl="8"] { box-shadow: 0 0 24px rgba(0,0,0,.35),      var(--_shadow, 0 0 0 transparent); }
.net-card[data-bl="9"] { box-shadow: 0 0 28px rgba(0,0,0,.6),       var(--_shadow, 0 0 0 transparent); }
</style>

<script>
/* (unchanged JS; it still discovers BL/Wanted from rendered cards) */
(function(){
  const $list = document.getElementById('bounty-list');
  const $cards = Array.from($list.querySelectorAll('.net-card'));
  const $bl = document.getElementById('filter-bl');
  const $wanted = document.getElementById('filter-wanted');
  const $search = document.getElementById('filter-search');
  const $clear = document.getElementById('filters-clear');
  const $emptyTpl = document.getElementById('empty-state');

  const blSet = new Set();
  const wantedSet = new Set();
  $cards.forEach(c => {
    const bl = (c.dataset.bl || "").trim();
    if (bl) blSet.add(bl);
    const w = (c.dataset.wanted || "").split(',').map(s => s.trim()).filter(Boolean);
    w.forEach(val => wantedSet.add(val));
  });

  [...blSet].sort((a,b)=>Number(a)-Number(b)).forEach(v => {
    const opt = document.createElement('option'); opt.value = v; opt.textContent = v;
    $bl.appendChild(opt);
  });
  [...wantedSet].sort().forEach(v => {
    const opt = document.createElement('option'); opt.value = v; opt.textContent = v.replace(/\b\w/g, m=>m.toUpperCase());
    $wanted.appendChild(opt);
  });

  function applyFilters(){
    const fBL = ($bl.value || "").toLowerCase();
    const fWanted = ($wanted.value || "").toLowerCase();
    const fText = ($search.value || "").toLowerCase().trim();

    let visible = 0;
    $cards.forEach(card => {
      const cb = (card.dataset.bl || "").toLowerCase();
      const cw = (card.dataset.wanted || "").toLowerCase();
      const ct = (card.dataset.text || "");

      const matchBL = !fBL || cb === fBL;
      const matchWanted = !fWanted || cw.split(',').map(s=>s.trim()).includes(fWanted);
      const matchText = !fText || ct.includes(fText);

      const show = matchBL && matchWanted && matchText;
      card.style.display = show ? "" : "none";
      if (show) visible++;
    });

    const existingEmpty = $list.querySelector('.net-empty');
    if (visible === 0 && !existingEmpty) {
      const frag = $emptyTpl.content.cloneNode(true);
      $list.appendChild(frag);
    } else if (visible > 0 && existingEmpty) {
      existingEmpty.remove();
    }
  }

  [$bl, $wanted, $search].forEach(el => el.addEventListener('input', applyFilters));
  $clear.addEventListener('click', () => {
    $bl.value = ""; $wanted.value = ""; $search.value = "";
    applyFilters();
  });

  applyFilters();
})();
</script>
