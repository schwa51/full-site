---
title: Bounty Net — Live Postings
layout: layout.njk
theme: mothership
publish: true
type: general
campaign: mothership
---

{% set bounties = collections.all | byType('bounty') %}

<div class="net-wrap">

  <header class="net-header">
    <h1>⟜ BOUNTY NET // LIVE FEED ⟜</h1>
    <p class="net-sub">Authenticated uplink established · feed integrity nominal</p>

    <form id="filters" class="net-filters" autocomplete="off">
      <label>
        BL
        <select id="filter-bl">
          <option value="">All</option>
          {# We'll also fill this dynamically via JS from the cards #}
        </select>
      </label>

      <label>
        Wanted
        <select id="filter-wanted">
          <option value="">All</option>
          {# Also dynamically filled #}
        </select>
      </label>

      <label class="search">
        Search
        <input id="filter-search" type="search" placeholder="Target / Advert…" inputmode="search">
      </label>

      <button type="button" id="filters-clear" class="ghost">Clear</button>
    </form>
  </header>

  <section id="bounty-list" class="net-grid">
    {% for bounty in bounties | reverse %}
      {% set fm = bounty.data %}
      {% set target = fm.target or "—" %}
      {% set bl = fm.BL or "" %}
      {% set reward = fm.reward or "—" %}
      {% set wanted = fm.wanted %}
      {% set wantedList = wanted | join(", ") if wanted else "" %}
      {% set advert = fm.Advert or "" %}
      {% set thumb = fm.image or "" %}

      <article
        class="net-card"
        data-bl="{{ (bl ~ '') | trim }}"
        data-wanted="{{ wantedList | lower }}"
        data-text="{{ (target ~ ' ' ~ advert) | lower | replace('\n',' ') }}"
      >
        <a class="net-card__link" href="{{ bounty.url }}">
          <div class="net-card__chrome">
            <div class="chrome__glitch" aria-hidden="true"></div>
            <div class="chrome__scanline" aria-hidden="true"></div>
          </div>

          <header class="net-card__head">
            <div class="net-card__eyebrow">Bounty Level: <strong>{{ bl or "?" }}</strong></div>
            <h2 class="net-card__title">{{ target }}</h2>
          </header>

          {% if thumb %}
            <div class="net-card__thumb" style="background-image:url('{{ thumb }}')"></div>
          {% endif %}

          <dl class="net-card__meta">
            <div><dt>Reward</dt><dd>{{ reward }}</dd></div>
            <div><dt>Wanted</dt><dd>{{ wantedList or "—" }}</dd></div>
          </dl>

          {% if advert %}
            <p class="net-card__advert">{{ advert | truncate(180, true, "…") }}</p>
          {% endif %}

          <footer class="net-card__foot">
            <span>OPEN RECORD</span>
            <span class="arrow">↗</span>
          </footer>
        </a>
      </article>
    {% endfor %}
  </section>

  <template id="empty-state">
    <p class="net-empty">No results. Adjust filters or clear all.</p>
  </template>
</div>

<style>
/* (unchanged styles) */
</style>

<script>
/* (unchanged JS; it still discovers BL/Wanted from rendered cards) */
(function(){
  const $list = document.getElementById('bounty-list');
  const $cards = Array.from($list.querySelectorAll('.net-card'));
  const $bl = document.getElementById('filter-bl');
  const $wanted = document.getElementById('filter-wanted');
  const $search = document.getElementById('filter-search');
  const $clear = document.getElementById('filters-clear');
  const $emptyTpl = document.getElementById('empty-state');

  const blSet = new Set();
  const wantedSet = new Set();
  $cards.forEach(c => {
    const bl = (c.dataset.bl || "").trim();
    if (bl) blSet.add(bl);
    const w = (c.dataset.wanted || "").split(',').map(s => s.trim()).filter(Boolean);
    w.forEach(val => wantedSet.add(val));
  });

  [...blSet].sort((a,b)=>Number(a)-Number(b)).forEach(v => {
    const opt = document.createElement('option'); opt.value = v; opt.textContent = v;
    $bl.appendChild(opt);
  });
  [...wantedSet].sort().forEach(v => {
    const opt = document.createElement('option'); opt.value = v; opt.textContent = v.replace(/\b\w/g, m=>m.toUpperCase());
    $wanted.appendChild(opt);
  });

  function applyFilters(){
    const fBL = ($bl.value || "").toLowerCase();
    const fWanted = ($wanted.value || "").toLowerCase();
    const fText = ($search.value || "").toLowerCase().trim();

    let visible = 0;
    $cards.forEach(card => {
      const cb = (card.dataset.bl || "").toLowerCase();
      const cw = (card.dataset.wanted || "").toLowerCase();
      const ct = (card.dataset.text || "");

      const matchBL = !fBL || cb === fBL;
      const matchWanted = !fWanted || cw.split(',').map(s=>s.trim()).includes(fWanted);
      const matchText = !fText || ct.includes(fText);

      const show = matchBL && matchWanted && matchText;
      card.style.display = show ? "" : "none";
      if (show) visible++;
    });

    const existingEmpty = $list.querySelector('.net-empty');
    if (visible === 0 && !existingEmpty) {
      const frag = $emptyTpl.content.cloneNode(true);
      $list.appendChild(frag);
    } else if (visible > 0 && existingEmpty) {
      existingEmpty.remove();
    }
  }

  [$bl, $wanted, $search].forEach(el => el.addEventListener('input', applyFilters));
  $clear.addEventListener('click', () => {
    $bl.value = ""; $wanted.value = ""; $search.value = "";
    applyFilters();
  });

  applyFilters();
})();
</script>
