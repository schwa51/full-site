---
title: Items
layout: layout.njk
theme: mothership
type: items
campaign: mothership_oct
eleventyNavigation:
  key: Items
  parent: Mothership October
  order: 2
---
<!-- Tools section -->
<section class="tools">
  <ul>
    <li><a href="/echoes-beneath-the-mountains/items/item-generator/">Item Generator</a></li>
  </ul>
</section>

<h1>Objects found or rumored</h1>

{% set campaign = campaignSlug or (campaign | slug) %}
{% set section  = type | slug %}

{% set items = (collections.public_content or [])
  | byCampaign(campaign)
  | where("data.section", section)
  | sortBy("data.title") %}

{# self guards #}
{% set currentUrl  = page.url or '' %}
{% set currentPath = page.inputPath %}
{% set sectionIndexUrl = "/vault/campaigns/" + campaign + "/" + section + "/" %}

<ul class="list">
  {% for it in items %}
    {% set isSelfOrIndex = (it.inputPath == currentPath)
                           or (it.url == currentUrl)
                           or (it.url == sectionIndexUrl)
                           or (it.page and it.page.fileSlug == "index") %}
    {% if not isSelfOrIndex %}
      <li><a href="{{ it.url }}">{{ it.data.title }}</a></li>
    {% endif %}
  {% endfor %}
</ul>

{% gm %}
<h2>GM-only {{ section | capitalize }}</h2>
{% set gmItems = (collections.campaign_content or [])
  | byCampaign(campaign)
  | where("data.gm", true)
  | where("data.type", section)
  | sortBy("data.title")
%}
<ul class="list">
  {% for it in gmItems %}
    {% if it.url and it.data and it.data.title %}
      <li><a href="{{ it.url }}">{{ it.data.title }}</a></li>
    {% endif %}
  {% endfor %}
</ul>
{% endgm %}

